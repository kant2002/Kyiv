namespace Kyiv.Tests;

public class ТестиПарсераЛістінгу
{
    [Fact]
    public void КомандаТекстом()
    {
        var лістінг = ПарсерЛістінга.ПрочитатиІзЛіній(
            """
            0001 37 7777 7777 7777
               2 25 2525 2525 2525
               3 12 5252 5252 5252
               4 01 0001 0001 0001
               5 33 0000 0000 0777
               6 01 0004 0000 0020
               7 01 0000 0000 0020
            0010 00 0041 0041 0000
               1 26 1777 1737 0000
               2 00 0040 0040 0000
               3 26 2000 1740 0000
               4 01 0000 0000 0210
            0015 26 0166 0000 0000
               6 07 4001 0210 0210
               7 27 4001 0016 0020
            0020 22 0210 0210 0021
               1 33 0000 0000 0000
               2 31 3001 0025 0023
               3 01 3002 0000 0020
               4 05 0000 0000 0030
               5 01 0007 0003 0026
               6 01 0000 0000 0020
               7 03 3010 0026 0026
            0030 26 1777 0177 0000
            0031 01 0020 0000 4001
               2 27 4001 0031 0033
               3 03 3010 3200 0036
               4 26 0000 0200 0000
               5 16 4000 0020 0037
               6 33 0000 1000 0000
               7 27 4001 0035 0040
            0040 03 3012 0036 0036
               1 05 0036 0165 0034
               2 31 3001 0043 0044
               3 05 0026 0006 0026
               4 31 3000 0045 0022
               5 01 0000 0000 0014
               6 01 0000 0000 0020
               7 01 3036 0000 0021
            0050 26 1777 0200 0000
               1 01 0020 0000 4000
               2 27 4001 0051 0053
               3 26 1573 0000 0000
               4 01 0021 0000 4204
               5 03 0000 3200 0015
               6 07 4204 4204 0000
               7 03 3012 0015 0015
            0060 05 0015 0005 0056
               1 27 4041 0054 0062
               2 01 0077 0000 0063
               3 26 0245 0205 0000
               4 16 4000 0020 0066
               5 33 0000 0002 0000
               6 27 4001 0064 0067
               7 03 0010 0063 0063
            0070 05 0063 0011 0063
               1 31 0014 0072 0076
               2 02 0000 0000 0014
               3 01 0000 0000 0021
               4 01 3036 0000 0020
               5 05 0000 0000 0050
               6 31 3000 0100 0045
               7 26 0245 0205 0000
            0100 01 0116 0000 0105
               1 26 1600 0000 0000
               2 01 0002 0000 4200
               3 27 4001 0102 0104
               4 03 3011 0065 0107
               5 26 0240 0200 0000
               6 16 4000 0002 0110
               7 33 0000 0000 0000
            0110 27 4001 0106 0111
               1 03 3012 0107 0107
               2 05 0107 0166 0105
               3 03 0012 0105 0105
               4 05 0105 0013 0104
               5 31 3000 0117 0100
               6 26 0240 0200 0000
               7 01 0000 0000 0014
            0120 01 3012 0000 0017
               1 01 0017 0000 0021
               2 26 0000 0200 0000
               3 01 0021 0000 0020
               4 31 0014 0126 0125
               5 01 3036 0020 0020
               6 01 0020 0000 4000
               7 16 0021 3042 0133
            0130 16 0021 3026 0135
               1 13 3012 0021 0021
               2 05 0000 0000 0136
               3 01 3026 0000 0021
               4 05 0000 0000 0136
               5 01 3012 0000 0021
               6 27 4001 0123 0137
               7 01 0017 0000 0021
            0140 26 0000 0200 0000
               1 01 0021 0000 0020
               2 31 0014 0144 0143
               3 01 3036 0020 0020
               4 16 4000 0020 0146
               5 33 0000 0004 0000
               6 16 0021 3042 0152
               7 16 0021 3026 0154
            0150 13 3012 0021 0021
               1 05 0000 0000 0155
               2 01 3026 0000 0021
               3 05 0000 0000 0155
               4 01 3012 0000 0021
               5 27 4001 0141 0156
               6 13 3012 0017 0017
               7 16 0017 3042 0161
            0160 05 0000 0000 0121
               1 31 0014 0162 0164
               2 02 0000 0000 0014
               3 05 0000 0000 0120
               4 31 3000 0022 0117
               5 33 0000 0001 0077
               6 33 0000 0003 0177
            """.ReplaceLineEndings().Split(Environment.NewLine));

        var одиницяКоду = Assert.Single(лістінг.ОдиниціКоду);
        Assert.Equal(1, одиницяКоду.ПочатковаАдреса);
        Assert.Equal(118, одиницяКоду.Команди.Count);
    }
}
